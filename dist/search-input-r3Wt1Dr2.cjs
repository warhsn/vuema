"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),R=require("./errors-BSvFB-p5.cjs"),U=require("./field-error.vue_vue_type_script_setup_true_lang-DddrtrU-.cjs"),G=require("./sizes-CcrdSSeT.cjs"),H=require("./index-XcQWi_WO.cjs"),J={class:"search-input"},Q={key:0,class:"tags is-marginless"},W=["onClick","disabled"],X=["placeholder","disabled","onKeydown"],Y={key:1,class:"dropdown-menu"},Z={class:"dropdown-content"},_=["onMousedown","onMouseenter"],y="update:modelValue",ee="focus",le="blur",te=e.defineComponent({__name:"search-input",props:{modelValue:{default:()=>[]},items:{},valueKey:{default:"value"},labelKey:{default:"label"},searchPlaceholder:{default:"Search..."},allowNew:{type:Boolean,default:!1},emitFullObjects:{type:Boolean,default:!1},withTags:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},classes:{},disabled:{type:Boolean},forLabel:{},placeholder:{},required:{type:Boolean},isLoading:{type:Boolean},isRounded:{type:Boolean},autocomplete:{type:Boolean},icon:{},iconType:{},iconPack:{},textIcon:{type:Boolean},leftIcon:{},iconClasses:{},leftIconClass:{},leftIconType:{},rightIconClass:{},rightIcon:{},rightIconType:{},error:{},hasAddons:{type:Boolean},isNormal:{type:Boolean},isSmall:{type:Boolean},isMedium:{type:Boolean},isLarge:{type:Boolean},isResponsive:{type:Boolean},isExpanded:{type:Boolean},isFullwidth:{type:Boolean},is0:{type:Boolean},is1:{type:Boolean},is2:{type:Boolean},is3:{type:Boolean},is4:{type:Boolean},is5:{type:Boolean},is6:{type:Boolean},is7:{type:Boolean},is8:{type:Boolean},is9:{type:Boolean},is10:{type:Boolean},is11:{type:Boolean},is12:{type:Boolean}},setup(a,{emit:M}){const t=a,S=G.useSizes(t),f=M,i=e.ref(""),c=e.ref(!1),s=e.ref(0),r=e.ref(null);function p(){return t.modelValue?Array.isArray(t.modelValue)?t.modelValue:[t.modelValue]:[]}function b(){if(t.emitFullObjects!==void 0)return t.emitFullObjects;const l=p();if(l.length===0)return!1;const o=l[0];return typeof o=="object"&&o!==null&&o.hasOwnProperty(t.labelKey)}function V(l){if(l&&l[t.labelKey])return l[t.labelKey];if(t.items&&t.items.length>0){const o=t.items.find(n=>{const d=m(n),u=m(l);return d===u});if(o)return B(o)}return l[t.labelKey]||l.label||l.name||String(l)}function B(l){return l?l[t.labelKey]||l.label||l.name||String(l):""}function m(l){return l?l[t.valueKey]||l.value||l.id||l:null}function k(l,o){const n=m(l);return n?String(n):`item-${o}`}const C=e.computed(()=>p()),w=e.computed(()=>t.allowNew&&i.value&&i.value.trim()!==""&&!L(i.value)),I=e.computed(()=>t.multiple||t.disabled||!t.modelValue?!1:Array.isArray(t.modelValue)?t.modelValue.length>0:!0),v=e.computed(()=>{if(!t.items||t.items.length===0)return[];if(!i.value)return t.items.filter(o=>!g(o));const l=i.value.toLowerCase();return t.items.filter(o=>B(o).toLowerCase().includes(l)&&!g(o))});function g(l){const o=p();if(o.length===0)return!1;const n=m(l);return o.some(d=>m(d)===n)}function L(l){return!t.items||t.items.length===0?!1:t.items.some(o=>B(o).toLowerCase()===l.toLowerCase())}function $(){c.value=!0,s.value=0,!t.multiple&&t.modelValue&&f(y,null)}function A(){c.value||(c.value=!0,s.value=0)}const q=l=>{r.value&&(clearTimeout(r.value),r.value=null),!t.multiple&&(l!=null&&l.target)&&i.value&&l.target.select(),c.value=!0,f(ee)},D=()=>{r.value=setTimeout(()=>{c.value=!1,f(le),r.value=null},150)};function E(l){if(r.value&&(clearTimeout(r.value),r.value=null),!g(l)){const o=b()?l:m(l),n=t.multiple?[...p(),o]:o;f(y,n)}i.value="",s.value=0,t.multiple||(c.value=!1)}function N(l){if(r.value&&(clearTimeout(r.value),r.value=null),t.allowNew&&l&&l.trim()!==""){const o={[t.valueKey]:`new-${Date.now()}`,[t.labelKey]:l.trim()},n=b()?o:m(o),d=t.multiple?[...p(),n]:n;f(y,d),i.value="",s.value=0,t.multiple||(c.value=!1)}}function F(l){if(t.modelValue)if(!t.multiple)f(y,null);else{const o=m(l),n=p().filter(d=>m(d)!==o);f(y,n)}}function O(){r.value&&(clearTimeout(r.value),r.value=null),f(y,null),i.value="",c.value=!1}function x(){s.value>=0&&s.value<v.value.length?E(v.value[s.value]):w.value&&s.value===v.value.length&&N(i.value)}function T(l){if(!c.value){c.value=!0;return}const o=v.value.length+(w.value?1:0);if(o===0)return;let n=s.value+l;n<0&&(n=o-1),n>=o&&(n=0),s.value=n}function z(){c.value=!1,i.value="",s.value=0}const j=R._hasErrors(t),P=e.computed(()=>({"is-danger":j.value,"is-rounded":t.isRounded,...S}));return e.watch(()=>t.modelValue,l=>{t.multiple||(l?i.value=V(l):i.value="")},{deep:!0,immediate:!0}),(l,o)=>{const n=e.resolveComponent("field-label"),d=e.resolveComponent("b-icon");return e.openBlock(),e.createElementBlock("div",null,[l.$slots.default||l.$slots.description?(e.openBlock(),e.createBlock(n,{key:0,required:a.required},{description:e.withCtx(()=>[e.renderSlot(l.$slots,"description",{},void 0,!0)]),default:e.withCtx(()=>[e.renderSlot(l.$slots,"default",{},void 0,!0)]),_:3},8,["required"])):e.createCommentVNode("",!0),e.createElementVNode("div",J,[C.value.length>0&&a.withTags&&a.multiple?(e.openBlock(),e.createElementBlock("div",Q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,(u,h)=>(e.openBlock(),e.createElementBlock("span",{class:"tag",key:k(u,h)},[e.createTextVNode(e.toDisplayString(V(u))+" ",1),e.createElementVNode("button",{class:"delete is-small",onClick:K=>F(u),disabled:a.disabled},null,8,W)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["control",{"has-icons-left":a.leftIcon,"has-icons-right":a.rightIcon||I.value,"is-loading":a.isLoading,"is-expanded":a.isExpanded}])},[e.withDirectives(e.createElementVNode("input",{type:"text",class:e.normalizeClass(["input",P.value]),placeholder:a.searchPlaceholder||a.placeholder,disabled:a.disabled,"onUpdate:modelValue":o[0]||(o[0]=u=>i.value=u),onInput:$,onFocus:o[1]||(o[1]=u=>q(u)),onBlur:D,onClick:A,onKeydown:[e.withKeys(e.withModifiers(x,["prevent"]),["enter"]),o[2]||(o[2]=e.withKeys(e.withModifiers(u=>T(1),["prevent"]),["down"])),o[3]||(o[3]=e.withKeys(e.withModifiers(u=>T(-1),["prevent"]),["up"])),e.withKeys(z,["esc"])]},null,42,X),[[e.vModelText,i.value]]),a.leftIcon?(e.openBlock(),e.createBlock(d,{key:0,class:"icon is-small is-left",icon:a.leftIcon,"icon-type":a.leftIconType},null,8,["icon","icon-type"])):e.createCommentVNode("",!0),a.rightIcon?(e.openBlock(),e.createBlock(d,{key:1,class:"icon is-small is-right",icon:a.rightIcon,"icon-type":a.rightIconType},null,8,["icon","icon-type"])):e.createCommentVNode("",!0),I.value?(e.openBlock(),e.createElementBlock("span",{key:2,class:"icon is-small is-right is-clickable clear-button",onMousedown:e.withModifiers(O,["prevent"]),role:"button","aria-label":"Clear selection"},[...o[6]||(o[6]=[e.createElementVNode("i",{class:"fas fa-times-circle"},null,-1)])],32)):e.createCommentVNode("",!0)],2),c.value&&(v.value.length>0||w.value)?(e.openBlock(),e.createElementBlock("div",Y,[e.createElementVNode("div",Z,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value,(u,h)=>(e.openBlock(),e.createElementBlock("a",{key:k(u,h),class:e.normalizeClass(["dropdown-item",{"is-active":h===s.value}]),onMousedown:e.withModifiers(K=>E(u),["prevent"]),onMouseenter:K=>s.value=h},e.toDisplayString(B(u)),43,_))),128)),w.value?(e.openBlock(),e.createElementBlock("a",{key:0,class:e.normalizeClass(["dropdown-item",{"is-active":v.value.length===s.value}]),onMousedown:o[4]||(o[4]=e.withModifiers(u=>N(i.value),["prevent"])),onMouseenter:o[5]||(o[5]=u=>s.value=v.value.length)},' Add "'+e.toDisplayString(i.value)+'" ',35)):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)]),e.createVNode(U._sfc_main,{error:a.error},null,8,["error"])])}}}),oe=H._export_sfc(te,[["__scopeId","data-v-e67c2557"]]);exports.default=oe;
