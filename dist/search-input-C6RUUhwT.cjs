"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),z=require("./errors-BSvFB-p5.cjs"),j=require("./field-error.vue_vue_type_script_setup_true_lang-DddrtrU-.cjs"),A=require("./sizes-CcrdSSeT.cjs"),P=require("./index-DMWZj4_q.cjs"),R={class:"search-input"},U={key:0,class:"tags is-marginless"},G=["onClick","disabled"],H=["placeholder","disabled","onKeydown"],J={key:1,class:"dropdown-menu"},Q={class:"dropdown-content"},W=["onMousedown","onMouseenter"],B="update:modelValue",X="focus",Y="blur",Z=e.defineComponent({__name:"search-input",props:{modelValue:{default:()=>[]},items:{},valueKey:{default:"value"},labelKey:{default:"label"},searchPlaceholder:{default:"Search..."},allowNew:{type:Boolean,default:!1},emitFullObjects:{type:Boolean,default:!1},classes:{},disabled:{type:Boolean},forLabel:{},placeholder:{},required:{type:Boolean},isLoading:{type:Boolean},isRounded:{type:Boolean},autocomplete:{type:Boolean},icon:{},iconType:{},iconPack:{},textIcon:{type:Boolean},leftIcon:{},iconClasses:{},leftIconClass:{},leftIconType:{},rightIconClass:{},rightIcon:{},rightIconType:{},error:{},hasAddons:{type:Boolean},isNormal:{type:Boolean},isSmall:{type:Boolean},isMedium:{type:Boolean},isLarge:{type:Boolean},isResponsive:{type:Boolean},isExpanded:{type:Boolean},isFullwidth:{type:Boolean},is0:{type:Boolean},is1:{type:Boolean},is2:{type:Boolean},is3:{type:Boolean},is4:{type:Boolean},is5:{type:Boolean},is6:{type:Boolean},is7:{type:Boolean},is8:{type:Boolean},is9:{type:Boolean},is10:{type:Boolean},is11:{type:Boolean},is12:{type:Boolean}},setup(C,{emit:E}){const o=C,N=A.useSizes(o),v=E,r=e.ref(""),i=e.ref(!1),s=e.ref(0),u=e.ref(null);function w(){if(o.emitFullObjects!==void 0)return o.emitFullObjects;if(!o.modelValue||o.modelValue.length===0)return!1;const l=o.modelValue[0];return typeof l=="object"&&l!==null&&l.hasOwnProperty(o.labelKey)}function K(l){if(l&&l[o.labelKey])return l[o.labelKey];if(o.items&&o.items.length>0){const t=o.items.find(n=>{const p=c(n),a=c(l);return p===a});if(t)return y(t)}return l[o.labelKey]||l.label||l.name||String(l)}function y(l){return l?l[o.labelKey]||l.label||l.name||String(l):""}function c(l){return l?l[o.valueKey]||l.value||l.id||l:null}function g(l,t){const n=c(l);return n?String(n):`item-${t}`}const m=e.computed(()=>o.allowNew&&r.value&&r.value.trim()!==""&&!T(r.value)),d=e.computed(()=>{if(!o.items||o.items.length===0)return[];if(!r.value)return o.items.filter(t=>!h(t));const l=r.value.toLowerCase();return o.items.filter(t=>y(t).toLowerCase().includes(l)&&!h(t))});function h(l){if(!o.modelValue||o.modelValue.length===0)return!1;const t=c(l);return o.modelValue.some(n=>c(n)===t)}function T(l){return!o.items||o.items.length===0?!1:o.items.some(t=>y(t).toLowerCase()===l.toLowerCase())}function S(){i.value=!0,s.value=0}function L(){i.value||(i.value=!0,s.value=0)}const M=()=>{u.value&&(clearTimeout(u.value),u.value=null),i.value=!0,v(X)},$=()=>{u.value=setTimeout(()=>{i.value=!1,v(Y),u.value=null},150)};function V(l){if(u.value&&(clearTimeout(u.value),u.value=null),!h(l)){const t=w()?l:c(l),n=[...o.modelValue||[],t];v(B,n)}r.value="",s.value=0}function b(l){if(u.value&&(clearTimeout(u.value),u.value=null),o.allowNew&&l&&l.trim()!==""){const t={[o.valueKey]:`new-${Date.now()}`,[o.labelKey]:l.trim()},n=w()?t:c(t),p=[...o.modelValue||[],n];v(B,p),r.value="",s.value=0}}function q(l){if(!o.modelValue)return;const t=c(l),n=o.modelValue.filter(p=>c(p)!==t);v(B,n)}function D(){d.value.length+(m.value?1:0),s.value>=0&&s.value<d.value.length?V(d.value[s.value]):m.value&&s.value===d.value.length&&b(r.value)}function k(l){if(!i.value){i.value=!0;return}const t=d.value.length+(m.value?1:0);if(t===0)return;let n=s.value+l;n<0&&(n=t-1),n>=t&&(n=0),s.value=n}function F(){i.value=!1,r.value="",s.value=0}const O=z._hasErrors(o),_=e.computed(()=>({"is-danger":O.value,"is-rounded":o.isRounded,...N}));return e.watch(()=>o.modelValue,l=>{},{deep:!0}),(l,t)=>{const n=e.resolveComponent("field-label"),p=e.resolveComponent("b-icon");return e.openBlock(),e.createElementBlock("div",null,[l.$slots.default||l.$slots.description?(e.openBlock(),e.createBlock(n,{key:0,required:l.required},{description:e.withCtx(()=>[e.renderSlot(l.$slots,"description",{},void 0,!0)]),default:e.withCtx(()=>[e.renderSlot(l.$slots,"default",{},void 0,!0)]),_:3},8,["required"])):e.createCommentVNode("",!0),e.createElementVNode("div",R,[l.modelValue&&l.modelValue.length>0?(e.openBlock(),e.createElementBlock("div",U,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.modelValue,(a,f)=>(e.openBlock(),e.createElementBlock("span",{class:"tag",key:g(a,f)},[e.createTextVNode(e.toDisplayString(K(a))+" ",1),e.createElementVNode("button",{class:"delete is-small",onClick:I=>q(a),disabled:l.disabled},null,8,G)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["control",{"has-icons-left":l.leftIcon,"has-icons-right":l.rightIcon,"is-loading":l.isLoading,"is-expanded":l.isExpanded}])},[e.withDirectives(e.createElementVNode("input",{type:"text",class:e.normalizeClass(["input",_.value]),placeholder:l.searchPlaceholder||l.placeholder,disabled:l.disabled,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),onInput:S,onFocus:M,onBlur:$,onClick:L,onKeydown:[e.withKeys(e.withModifiers(D,["prevent"]),["enter"]),t[1]||(t[1]=e.withKeys(e.withModifiers(a=>k(1),["prevent"]),["down"])),t[2]||(t[2]=e.withKeys(e.withModifiers(a=>k(-1),["prevent"]),["up"])),e.withKeys(F,["esc"])]},null,42,H),[[e.vModelText,r.value]]),l.leftIcon?(e.openBlock(),e.createBlock(p,{key:0,class:"icon is-small is-left",icon:l.leftIcon,"icon-type":l.leftIconType},null,8,["icon","icon-type"])):e.createCommentVNode("",!0),l.rightIcon?(e.openBlock(),e.createBlock(p,{key:1,class:"icon is-small is-right",icon:l.rightIcon,"icon-type":l.rightIconType},null,8,["icon","icon-type"])):e.createCommentVNode("",!0)],2),i.value&&(d.value.length>0||m.value)?(e.openBlock(),e.createElementBlock("div",J,[e.createElementVNode("div",Q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,(a,f)=>(e.openBlock(),e.createElementBlock("a",{key:g(a,f),class:e.normalizeClass(["dropdown-item",{"is-active":f===s.value}]),onMousedown:e.withModifiers(I=>V(a),["prevent"]),onMouseenter:I=>s.value=f},e.toDisplayString(y(a)),43,W))),128)),m.value?(e.openBlock(),e.createElementBlock("a",{key:0,class:e.normalizeClass(["dropdown-item",{"is-active":d.value.length===s.value}]),onMousedown:t[3]||(t[3]=e.withModifiers(a=>b(r.value),["prevent"])),onMouseenter:t[4]||(t[4]=a=>s.value=d.value.length)},' Add "'+e.toDisplayString(r.value)+'" ',35)):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)]),e.createVNode(j._sfc_main,{error:l.error},null,8,["error"])])}}}),x=P._export_sfc(Z,[["__scopeId","data-v-f3b97951"]]);exports.default=x;
