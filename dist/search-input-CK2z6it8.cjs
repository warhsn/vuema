"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),j=require("./errors-BSvFB-p5.cjs"),P=require("./field-error.vue_vue_type_script_setup_true_lang-DddrtrU-.cjs"),R=require("./sizes-CcrdSSeT.cjs"),U=require("./index-CyLAE_B3.cjs"),G={class:"search-input"},H={key:0,class:"tags is-marginless"},J=["onClick","disabled"],Q=["placeholder","disabled","onKeydown"],W={key:1,class:"dropdown-menu"},X={class:"dropdown-content"},Y=["onMousedown","onMouseenter"],h="update:modelValue",Z="focus",_="blur",ee=e.defineComponent({__name:"search-input",props:{modelValue:{default:()=>[]},items:{},valueKey:{default:"value"},labelKey:{default:"label"},searchPlaceholder:{default:"Search..."},allowNew:{type:Boolean,default:!1},emitFullObjects:{type:Boolean,default:!1},withTags:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},classes:{},disabled:{type:Boolean},forLabel:{},placeholder:{},required:{type:Boolean},isLoading:{type:Boolean},isRounded:{type:Boolean},autocomplete:{type:Boolean},icon:{},iconType:{},iconPack:{},textIcon:{type:Boolean},leftIcon:{},iconClasses:{},leftIconClass:{},leftIconType:{},rightIconClass:{},rightIcon:{},rightIconType:{},error:{},hasAddons:{type:Boolean},isNormal:{type:Boolean},isSmall:{type:Boolean},isMedium:{type:Boolean},isLarge:{type:Boolean},isResponsive:{type:Boolean},isExpanded:{type:Boolean},isFullwidth:{type:Boolean},is0:{type:Boolean},is1:{type:Boolean},is2:{type:Boolean},is3:{type:Boolean},is4:{type:Boolean},is5:{type:Boolean},is6:{type:Boolean},is7:{type:Boolean},is8:{type:Boolean},is9:{type:Boolean},is10:{type:Boolean},is11:{type:Boolean},is12:{type:Boolean}},setup(a,{emit:K}){const o=a,M=R.useSizes(o),v=K,s=e.ref(""),r=e.ref(!1),i=e.ref(0),c=e.ref(null);function p(){return o.modelValue?Array.isArray(o.modelValue)?o.modelValue:[o.modelValue]:[]}function b(){if(o.emitFullObjects!==void 0)return o.emitFullObjects;const l=p();if(l.length===0)return!1;const t=l[0];return typeof t=="object"&&t!==null&&t.hasOwnProperty(o.labelKey)}function V(l){if(l&&l[o.labelKey])return l[o.labelKey];if(o.items&&o.items.length>0){const t=o.items.find(n=>{const d=f(n),u=f(l);return d===u});if(t)return B(t)}return l[o.labelKey]||l.label||l.name||String(l)}function B(l){return l?l[o.labelKey]||l.label||l.name||String(l):""}function f(l){return l?l[o.valueKey]||l.value||l.id||l:null}function k(l,t){const n=f(l);return n?String(n):`item-${t}`}const I=e.computed(()=>p()),w=e.computed(()=>o.allowNew&&s.value&&s.value.trim()!==""&&!S(s.value)),m=e.computed(()=>{if(!o.items||o.items.length===0)return[];if(!s.value)return o.items.filter(t=>!g(t));const l=s.value.toLowerCase();return o.items.filter(t=>B(t).toLowerCase().includes(l)&&!g(t))});function g(l){const t=p();if(t.length===0)return!1;const n=f(l);return t.some(d=>f(d)===n)}function S(l){return!o.items||o.items.length===0?!1:o.items.some(t=>B(t).toLowerCase()===l.toLowerCase())}function L(){r.value=!0,i.value=0,!o.multiple&&o.modelValue&&v(h,null)}function $(){r.value||(r.value=!0,i.value=0)}const A=l=>{c.value&&(clearTimeout(c.value),c.value=null),!o.multiple&&(l!=null&&l.target)&&s.value&&l.target.select(),r.value=!0,v(Z)},q=()=>{c.value=setTimeout(()=>{r.value=!1,v(_),c.value=null},150)};function C(l){if(c.value&&(clearTimeout(c.value),c.value=null),!g(l)){const t=b()?l:f(l),n=o.multiple?[...p(),t]:t;v(h,n)}s.value="",i.value=0,o.multiple||(r.value=!1)}function E(l){if(c.value&&(clearTimeout(c.value),c.value=null),o.allowNew&&l&&l.trim()!==""){const t={[o.valueKey]:`new-${Date.now()}`,[o.labelKey]:l.trim()},n=b()?t:f(t),d=o.multiple?[...p(),n]:n;v(h,d),s.value="",i.value=0,o.multiple||(r.value=!1)}}function D(l){if(o.modelValue)if(!o.multiple)v(h,null);else{const t=f(l),n=p().filter(d=>f(d)!==t);v(h,n)}}function F(){i.value>=0&&i.value<m.value.length?C(m.value[i.value]):w.value&&i.value===m.value.length&&E(s.value)}function N(l){if(!r.value){r.value=!0;return}const t=m.value.length+(w.value?1:0);if(t===0)return;let n=i.value+l;n<0&&(n=t-1),n>=t&&(n=0),i.value=n}function O(){r.value=!1,s.value="",i.value=0}const x=j._hasErrors(o),z=e.computed(()=>({"is-danger":x.value,"is-rounded":o.isRounded,...M}));return e.watch(()=>o.modelValue,l=>{o.multiple||(l?s.value=V(l):s.value="")},{deep:!0,immediate:!0}),(l,t)=>{const n=e.resolveComponent("field-label"),d=e.resolveComponent("b-icon");return e.openBlock(),e.createElementBlock("div",null,[l.$slots.default||l.$slots.description?(e.openBlock(),e.createBlock(n,{key:0,required:a.required},{description:e.withCtx(()=>[e.renderSlot(l.$slots,"description",{},void 0,!0)]),default:e.withCtx(()=>[e.renderSlot(l.$slots,"default",{},void 0,!0)]),_:3},8,["required"])):e.createCommentVNode("",!0),e.createElementVNode("div",G,[I.value.length>0&&a.withTags&&a.multiple?(e.openBlock(),e.createElementBlock("div",H,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(I.value,(u,y)=>(e.openBlock(),e.createElementBlock("span",{class:"tag",key:k(u,y)},[e.createTextVNode(e.toDisplayString(V(u))+" ",1),e.createElementVNode("button",{class:"delete is-small",onClick:T=>D(u),disabled:a.disabled},null,8,J)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["control",{"has-icons-left":a.leftIcon,"has-icons-right":a.rightIcon,"is-loading":a.isLoading,"is-expanded":a.isExpanded}])},[e.withDirectives(e.createElementVNode("input",{type:"text",class:e.normalizeClass(["input",z.value]),placeholder:a.searchPlaceholder||a.placeholder,disabled:a.disabled,"onUpdate:modelValue":t[0]||(t[0]=u=>s.value=u),onInput:L,onFocus:t[1]||(t[1]=u=>A(u)),onBlur:q,onClick:$,onKeydown:[e.withKeys(e.withModifiers(F,["prevent"]),["enter"]),t[2]||(t[2]=e.withKeys(e.withModifiers(u=>N(1),["prevent"]),["down"])),t[3]||(t[3]=e.withKeys(e.withModifiers(u=>N(-1),["prevent"]),["up"])),e.withKeys(O,["esc"])]},null,42,Q),[[e.vModelText,s.value]]),a.leftIcon?(e.openBlock(),e.createBlock(d,{key:0,class:"icon is-small is-left",icon:a.leftIcon,"icon-type":a.leftIconType},null,8,["icon","icon-type"])):e.createCommentVNode("",!0),a.rightIcon?(e.openBlock(),e.createBlock(d,{key:1,class:"icon is-small is-right",icon:a.rightIcon,"icon-type":a.rightIconType},null,8,["icon","icon-type"])):e.createCommentVNode("",!0)],2),r.value&&(m.value.length>0||w.value)?(e.openBlock(),e.createElementBlock("div",W,[e.createElementVNode("div",X,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,(u,y)=>(e.openBlock(),e.createElementBlock("a",{key:k(u,y),class:e.normalizeClass(["dropdown-item",{"is-active":y===i.value}]),onMousedown:e.withModifiers(T=>C(u),["prevent"]),onMouseenter:T=>i.value=y},e.toDisplayString(B(u)),43,Y))),128)),w.value?(e.openBlock(),e.createElementBlock("a",{key:0,class:e.normalizeClass(["dropdown-item",{"is-active":m.value.length===i.value}]),onMousedown:t[4]||(t[4]=e.withModifiers(u=>E(s.value),["prevent"])),onMouseenter:t[5]||(t[5]=u=>i.value=m.value.length)},' Add "'+e.toDisplayString(s.value)+'" ',35)):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)]),e.createVNode(P._sfc_main,{error:a.error},null,8,["error"])])}}}),le=U._export_sfc(ee,[["__scopeId","data-v-ff2b925b"]]);exports.default=le;
