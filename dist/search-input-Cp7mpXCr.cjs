"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),R=require("./errors-BSvFB-p5.cjs"),U=require("./field-error.vue_vue_type_script_setup_true_lang-DddrtrU-.cjs"),G=require("./sizes-CcrdSSeT.cjs"),H=require("./index-CRTqu8aW.cjs"),J={class:"search-input"},Q={key:0,class:"tags is-marginless"},W=["onClick","disabled"],X=["placeholder","disabled","onKeydown"],Y={key:1,class:"dropdown-menu"},Z={class:"dropdown-content"},_=["onMousedown","onMouseenter"],y="update:modelValue",ee="focus",le="blur",te=e.defineComponent({__name:"search-input",props:{modelValue:{default:()=>[]},items:{},valueKey:{default:"value"},labelKey:{default:"label"},searchPlaceholder:{default:"Search..."},allowNew:{type:Boolean,default:!1},emitFullObjects:{type:Boolean,default:!1},withTags:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},classes:{},disabled:{type:Boolean},forLabel:{},placeholder:{},required:{type:Boolean},isLoading:{type:Boolean},isRounded:{type:Boolean},autocomplete:{type:Boolean},icon:{},iconType:{},iconPack:{},textIcon:{type:Boolean},leftIcon:{},iconClasses:{},leftIconClass:{},leftIconType:{},rightIconClass:{},rightIcon:{},rightIconType:{},error:{},hasAddons:{type:Boolean},isNormal:{type:Boolean},isSmall:{type:Boolean},isMedium:{type:Boolean},isLarge:{type:Boolean},isResponsive:{type:Boolean},isExpanded:{type:Boolean},isFullwidth:{type:Boolean},is0:{type:Boolean},is1:{type:Boolean},is2:{type:Boolean},is3:{type:Boolean},is4:{type:Boolean},is5:{type:Boolean},is6:{type:Boolean},is7:{type:Boolean},is8:{type:Boolean},is9:{type:Boolean},is10:{type:Boolean},is11:{type:Boolean},is12:{type:Boolean}},setup(a,{emit:M}){const o=a,S=G.useSizes(o),f=M,s=e.ref(""),c=e.ref(!1),i=e.ref(0),r=e.ref(null);function p(){return o.modelValue?Array.isArray(o.modelValue)?o.modelValue:[o.modelValue]:[]}function b(){if(o.emitFullObjects!==void 0)return o.emitFullObjects;const l=p();if(l.length===0)return!1;const t=l[0];return typeof t=="object"&&t!==null&&t.hasOwnProperty(o.labelKey)}function V(l){if(l&&l[o.labelKey])return l[o.labelKey];if(o.items&&o.items.length>0){const t=o.items.find(n=>{const d=m(n),u=m(l);return d===u});if(t)return B(t)}return l[o.labelKey]||l.label||l.name||String(l)}function B(l){return l?l[o.labelKey]||l.label||l.name||String(l):""}function m(l){return l?l[o.valueKey]||l.value||l.id||l:null}function k(l,t){const n=m(l);return n?String(n):`item-${t}`}const C=e.computed(()=>p()),w=e.computed(()=>o.allowNew&&s.value&&s.value.trim()!==""&&!L(s.value)),I=e.computed(()=>o.multiple||o.disabled||!o.modelValue?!1:Array.isArray(o.modelValue)?o.modelValue.length>0:!0),v=e.computed(()=>{if(!o.items||o.items.length===0)return[];if(!s.value)return o.items.filter(t=>!g(t));const l=s.value.toLowerCase();return o.items.filter(t=>B(t).toLowerCase().includes(l)&&!g(t))});function g(l){const t=p();if(t.length===0)return!1;const n=m(l);return t.some(d=>m(d)===n)}function L(l){return!o.items||o.items.length===0?!1:o.items.some(t=>B(t).toLowerCase()===l.toLowerCase())}function $(){c.value=!0,i.value=0,!o.multiple&&o.modelValue&&f(y,null)}function A(){c.value||(c.value=!0,i.value=0)}const q=l=>{r.value&&(clearTimeout(r.value),r.value=null),!o.multiple&&(l!=null&&l.target)&&s.value&&l.target.select(),c.value=!0,f(ee)},D=()=>{r.value=setTimeout(()=>{c.value=!1,f(le),r.value=null},150)};function E(l){if(r.value&&(clearTimeout(r.value),r.value=null),!g(l)){const t=b()?l:m(l),n=o.multiple?[...p(),t]:t;f(y,n)}s.value="",i.value=0,o.multiple||(c.value=!1)}function N(l){if(r.value&&(clearTimeout(r.value),r.value=null),o.allowNew&&l&&l.trim()!==""){const t={[o.valueKey]:`new-${Date.now()}`,[o.labelKey]:l.trim()},n=b()?t:m(t),d=o.multiple?[...p(),n]:n;f(y,d),s.value="",i.value=0,o.multiple||(c.value=!1)}}function F(l){if(o.modelValue)if(!o.multiple)f(y,null);else{const t=m(l),n=p().filter(d=>m(d)!==t);f(y,n)}}function O(){r.value&&(clearTimeout(r.value),r.value=null),f(y,null),s.value="",c.value=!1}function x(){i.value>=0&&i.value<v.value.length?E(v.value[i.value]):w.value&&i.value===v.value.length&&N(s.value)}function T(l){if(!c.value){c.value=!0;return}const t=v.value.length+(w.value?1:0);if(t===0)return;let n=i.value+l;n<0&&(n=t-1),n>=t&&(n=0),i.value=n}function z(){c.value=!1,s.value="",i.value=0}const j=R._hasErrors(o),P=e.computed(()=>{const l={"is-danger":j.value,"is-rounded":o.isRounded,...S};return o.classes&&o.classes.split(" ").forEach(t=>{t.trim()&&(l[t.trim()]=!0)}),l});return e.watch(()=>o.modelValue,l=>{o.multiple||(l?s.value=V(l):s.value="")},{deep:!0,immediate:!0}),(l,t)=>{const n=e.resolveComponent("field-label"),d=e.resolveComponent("b-icon");return e.openBlock(),e.createElementBlock("div",null,[l.$slots.default||l.$slots.description?(e.openBlock(),e.createBlock(n,{key:0,required:a.required},{description:e.withCtx(()=>[e.renderSlot(l.$slots,"description",{},void 0,!0)]),default:e.withCtx(()=>[e.renderSlot(l.$slots,"default",{},void 0,!0)]),_:3},8,["required"])):e.createCommentVNode("",!0),e.createElementVNode("div",J,[C.value.length>0&&a.withTags&&a.multiple?(e.openBlock(),e.createElementBlock("div",Q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,(u,h)=>(e.openBlock(),e.createElementBlock("span",{class:"tag",key:k(u,h)},[e.createTextVNode(e.toDisplayString(V(u))+" ",1),e.createElementVNode("button",{class:"delete is-small",onClick:K=>F(u),disabled:a.disabled},null,8,W)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["control",{"has-icons-left":a.leftIcon,"has-icons-right":a.rightIcon||I.value,"is-loading":a.isLoading,"is-expanded":a.isExpanded}])},[e.withDirectives(e.createElementVNode("input",{type:"text",class:e.normalizeClass(["input",P.value]),placeholder:a.searchPlaceholder||a.placeholder,disabled:a.disabled,"onUpdate:modelValue":t[0]||(t[0]=u=>s.value=u),onInput:$,onFocus:t[1]||(t[1]=u=>q(u)),onBlur:D,onClick:A,onKeydown:[e.withKeys(e.withModifiers(x,["prevent"]),["enter"]),t[2]||(t[2]=e.withKeys(e.withModifiers(u=>T(1),["prevent"]),["down"])),t[3]||(t[3]=e.withKeys(e.withModifiers(u=>T(-1),["prevent"]),["up"])),e.withKeys(z,["esc"])]},null,42,X),[[e.vModelText,s.value]]),a.leftIcon?(e.openBlock(),e.createBlock(d,{key:0,class:"icon is-small is-left",icon:a.leftIcon,"icon-type":a.leftIconType},null,8,["icon","icon-type"])):e.createCommentVNode("",!0),a.rightIcon?(e.openBlock(),e.createBlock(d,{key:1,class:"icon is-small is-right",icon:a.rightIcon,"icon-type":a.rightIconType},null,8,["icon","icon-type"])):e.createCommentVNode("",!0),I.value?(e.openBlock(),e.createElementBlock("span",{key:2,class:"icon is-small is-right is-clickable clear-button",onMousedown:e.withModifiers(O,["prevent"]),role:"button","aria-label":"Clear selection"},[...t[6]||(t[6]=[e.createElementVNode("i",{class:"fas fa-times-circle"},null,-1)])],32)):e.createCommentVNode("",!0)],2),c.value&&(v.value.length>0||w.value)?(e.openBlock(),e.createElementBlock("div",Y,[e.createElementVNode("div",Z,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value,(u,h)=>(e.openBlock(),e.createElementBlock("a",{key:k(u,h),class:e.normalizeClass(["dropdown-item",{"is-active":h===i.value}]),onMousedown:e.withModifiers(K=>E(u),["prevent"]),onMouseenter:K=>i.value=h},e.toDisplayString(B(u)),43,_))),128)),w.value?(e.openBlock(),e.createElementBlock("a",{key:0,class:e.normalizeClass(["dropdown-item",{"is-active":v.value.length===i.value}]),onMousedown:t[4]||(t[4]=e.withModifiers(u=>N(s.value),["prevent"])),onMouseenter:t[5]||(t[5]=u=>i.value=v.value.length)},' Add "'+e.toDisplayString(s.value)+'" ',35)):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)]),e.createVNode(U._sfc_main,{error:a.error},null,8,["error"])])}}}),oe=H._export_sfc(te,[["__scopeId","data-v-a4110783"]]);exports.default=oe;
