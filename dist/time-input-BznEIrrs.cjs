"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),ie=require("./index-D29XoGE3.cjs"),L=require("./field-error.vue_vue_type_script_setup_true_lang-DddrtrU-.cjs"),R=require("./field-label.vue_vue_type_script_setup_true_lang-DxMFM4_c.cjs"),ne=require("./errors-BSvFB-p5.cjs"),le=require("./sizes-CcrdSSeT.cjs");function w(t){if(!t||typeof t!="string")return null;const m=t.trim();if(!m)return null;const o=/^(\d{1,2}):(\d{2})$/,a=/^(\d{1,2}):(\d{2})\s*(AM|PM|am|pm|A|P)$/i;let f=m.match(o);if(f){const s=parseInt(f[1],10),h=parseInt(f[2],10);if(s<0||s>23||h<0||h>59)return null;const n=s>=12?"PM":"AM";return{hour:s,minute:h,period:n}}if(f=m.match(a),f){let s=parseInt(f[1],10);const h=parseInt(f[2],10);let n=f[3].toUpperCase();n==="A"&&(n="AM"),n==="P"&&(n="PM");const v=n;return s<1||s>12||h<0||h>59?null:(v==="AM"?s=s===12?0:s:s=s===12?12:s+12,{hour:s,minute:h,period:v==="AM"||s<12?"AM":"PM"})}return null}function O(t,m){const o=t.toString().padStart(2,"0"),a=m.toString().padStart(2,"0");return`${o}:${a}`}function se(t,m){const o=t>=12?"PM":"AM",f=(t===0?12:t>12?t-12:t).toString().padStart(2,"0"),s=m.toString().padStart(2,"0");return`${f}:${s} ${o}`}function B(t,m,o="24"){return o==="12"?se(t,m):O(t,m)}function N(t,m){return m==="AM"?t===12?0:t:t===12?12:t+12}function q(t){const m=t>=12?"PM":"AM";return{hour:t===0?12:t>12?t-12:t,period:m}}function W(t,m,o,a){const f=t*60+m;if(o){const s=w(o);if(s){const h=s.hour*60+s.minute;if(f<h)return!1}}if(a){const s=w(a);if(s){const h=s.hour*60+s.minute;if(f>h)return!1}}return!0}function re(t=1){const m=[];for(let o=0;o<60;o+=t)m.push(o);return m}function ae(t="24"){return t==="12"?[12,1,2,3,4,5,6,7,8,9,10,11]:Array.from({length:24},(m,o)=>o)}const ce={class:"time-selector"},ue={class:"time-selector-content"},de={class:"time-selector-column"},me={class:"time-selector-label"},pe={class:"time-selector-scroll"},fe=["disabled","onClick"],he={class:"time-selector-column"},ve={class:"time-selector-scroll"},ge=["disabled","onClick"],ke={key:0,class:"time-selector-column time-selector-period"},ye={class:"time-selector-scroll"},we=e.defineComponent({__name:"time-selector",props:{hour:{},minute:{},period:{},format:{default:"24"},minuteStep:{default:1},minTime:{default:null},maxTime:{default:null},isTimeDisabled:{}},emits:["select-time","update:hour","update:minute","update:period"],setup(t,{emit:m}){const o=t,a=m,f=e.computed(()=>ae(o.format)),s=e.computed(()=>re(o.minuteStep)),h=r=>r.toString().padStart(2,"0"),n=r=>r.toString().padStart(2,"0"),v=r=>{if(o.hour===null)return!1;if(o.format==="12"){const{hour:c}=q(o.hour);return c===r}else return o.hour===r},k=r=>{const c=o.format==="12"?N(r,o.period):r,u=o.minute!==null?o.minute:0;return!!(!W(c,u,o.minTime,o.maxTime)||o.isTimeDisabled&&o.isTimeDisabled(c,u))},b=r=>{const c=o.hour!==null?o.hour:0;return!!(!W(c,r,o.minTime,o.maxTime)||o.isTimeDisabled&&o.isTimeDisabled(c,r))},C=r=>{if(k(r))return;const c=o.format==="12"?N(r,o.period):r;a("update:hour",c),o.minute!==null&&a("select-time",c,o.minute,o.period)},T=r=>{b(r)||(a("update:minute",r),o.hour!==null&&a("select-time",o.hour,r,o.period))},y=r=>{if(a("update:period",r),o.hour!==null){const{hour:c}=q(o.hour),u=N(c,r);a("update:hour",u),o.minute!==null&&a("select-time",u,o.minute,r)}};e.onMounted(()=>{E()}),e.watch([()=>o.hour,()=>o.minute],()=>{E()},{flush:"post"});const E=()=>{setTimeout(()=>{document.querySelectorAll(".time-selector-option.is-selected").forEach(c=>{c.scrollIntoView({block:"center",behavior:"smooth"})})},50)};return(r,c)=>(e.openBlock(),e.createElementBlock("div",ce,[e.createElementVNode("div",ue,[e.createElementVNode("div",de,[e.createElementVNode("div",me,e.toDisplayString((t.format==="12","Hour")),1),e.createElementVNode("div",pe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,u=>(e.openBlock(),e.createElementBlock("button",{key:u,type:"button",class:e.normalizeClass(["time-selector-option",{"is-selected":v(u),"is-disabled":k(u)}]),disabled:k(u),onClick:S=>C(u)},e.toDisplayString(h(u)),11,fe))),128))])]),e.createElementVNode("div",he,[c[2]||(c[2]=e.createElementVNode("div",{class:"time-selector-label"},"Minute",-1)),e.createElementVNode("div",ve,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,u=>(e.openBlock(),e.createElementBlock("button",{key:u,type:"button",class:e.normalizeClass(["time-selector-option",{"is-selected":t.minute===u,"is-disabled":b(u)}]),disabled:b(u),onClick:S=>T(u)},e.toDisplayString(n(u)),11,ge))),128))])]),t.format==="12"?(e.openBlock(),e.createElementBlock("div",ke,[c[3]||(c[3]=e.createElementVNode("div",{class:"time-selector-label"},"Period",-1)),e.createElementVNode("div",ye,[e.createElementVNode("button",{type:"button",class:e.normalizeClass(["time-selector-option",{"is-selected":t.period==="AM"}]),onClick:c[0]||(c[0]=u=>y("AM"))}," AM ",2),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["time-selector-option",{"is-selected":t.period==="PM"}]),onClick:c[1]||(c[1]=u=>y("PM"))}," PM ",2)])])):e.createCommentVNode("",!0)])]))}}),be=ie._export_sfc(we,[["__scopeId","data-v-1933b339"]]),Be={key:0},Ce=["placeholder","disabled","value"],Ee=["placeholder","disabled","value","aria-expanded","aria-describedby"],Me=["id"],Te=e.defineComponent({__name:"time-input",props:{format:{default:"24"},minTime:{},maxTime:{},withIcon:{type:Boolean,default:!0},minuteStep:{default:1},disabledTimes:{},isTimeDisabled:{},classes:{},disabled:{type:Boolean},forLabel:{},modelValue:{type:[Boolean,Number,String,Array,Date]},placeholder:{},required:{type:Boolean},isLoading:{type:Boolean},isRounded:{type:Boolean},autocomplete:{type:Boolean},icon:{},iconType:{},iconPack:{},textIcon:{type:Boolean},leftIcon:{},iconClasses:{},leftIconClass:{},leftIconType:{},rightIconClass:{},rightIcon:{},rightIconType:{},error:{},hasAddons:{type:Boolean},isNormal:{type:Boolean},isSmall:{type:Boolean},isMedium:{type:Boolean},isLarge:{type:Boolean},isResponsive:{type:Boolean},isExpanded:{type:Boolean},isFullwidth:{type:Boolean},is0:{type:Boolean},is1:{type:Boolean},is2:{type:Boolean},is3:{type:Boolean},is4:{type:Boolean},is5:{type:Boolean},is6:{type:Boolean},is7:{type:Boolean},is8:{type:Boolean},is9:{type:Boolean},is10:{type:Boolean},is11:{type:Boolean},is12:{type:Boolean}},emits:["update:model-value"],setup(t,{emit:m}){const o=t,a=m,f=e.ref(null),s=e.ref(null),h=e.ref(!1),n=e.reactive({showingPicker:!1,selectedTime:null,hour:null,minute:null,period:"AM"}),v=e.reactive({alignRight:!1,alignCenter:!1,showAbove:!1}),k=`time-picker-${Math.random().toString(36).substr(2,9)}`,b=le.useSizes(o),C=ne._hasErrors(o),T=e.computed(()=>n.showingPicker),y=e.computed(()=>!!n.selectedTime),E=e.computed(()=>{if(!n.selectedTime)return"";const i=w(n.selectedTime);return i?O(i.hour,i.minute):""}),r=e.computed(()=>({"is-danger":C.value,"is-rounded":o.isRounded,...b})),c=e.computed(()=>({"is-loading":o.isLoading,"is-expanded":o.isExpanded})),u=e.computed(()=>{const{"is-expanded":i,...l}=b;return{"is-danger":C.value,"is-rounded":o.isRounded,...l}}),S=e.computed(()=>{const i={};return v.alignRight?(i.right="0",i.left="auto",i.minWidth="240px",i.maxWidth="calc(100vw - 1rem)"):v.alignCenter?(i.left="50%",i.transform="translateX(-50%)",i.maxWidth="calc(100vw - 2rem)"):(i.left="0",i.maxWidth="calc(100vw - 1rem)"),v.showAbove?(i.top="auto",i.bottom="calc(100% + 5px)"):i.top="calc(100% + 5px)",i});e.onMounted(()=>{I(),F(),h.value||(document.addEventListener("click",z),document.addEventListener("keydown",x)),window.addEventListener("resize",A)}),e.onUnmounted(()=>{h.value||(document.removeEventListener("click",z),document.removeEventListener("keydown",x)),window.removeEventListener("resize",A)});function A(){I(),n.showingPicker&&D()}function x(i){n.showingPicker&&i.key==="Escape"&&(i.preventDefault(),n.showingPicker=!1)}function U(i){const{key:l}=i;if((l==="ArrowDown"||l===" ")&&!n.showingPicker){i.preventDefault(),P();return}if(l==="Escape"&&n.showingPicker){i.preventDefault(),n.showingPicker=!1;return}}function I(){const i="ontouchstart"in window||navigator.maxTouchPoints>0,l=window.innerWidth<=768,d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);h.value=i&&(l||d)}function F(){if(o.modelValue){const i=String(o.modelValue),l=w(i);l?(n.hour=l.hour,n.minute=l.minute,n.period=l.period,n.selectedTime=B(l.hour,l.minute,o.format)):g()}else g()}function g(){n.hour=null,n.minute=null,n.period="AM",n.selectedTime=null}function K(i){const d=i.target.value.trim();if(!d){g(),a("update:model-value","");return}const p=w(d);if(p){n.hour=p.hour,n.minute=p.minute,n.period=p.period;const M=B(p.hour,p.minute,o.format);n.selectedTime=M,a("update:model-value",M)}else g(),a("update:model-value","")}function j(i){const d=i.target.value.trim();if(!d){g(),a("update:model-value","");return}const p=w(d);p&&(n.hour=p.hour,n.minute=p.minute,n.period=p.period,n.selectedTime=d,a("update:model-value",d))}function $(){if(!n.selectedTime){g(),a("update:model-value","");return}const i=w(n.selectedTime);if(!i){g(),a("update:model-value","");return}const l=B(i.hour,i.minute,o.format);n.selectedTime=l,a("update:model-value",l)}function z(i){const l=i.target;f.value&&!f.value.contains(l)&&(n.showingPicker=!1)}function D(){if(!f.value)return;const i=280,l=16,d=f.value.getBoundingClientRect(),p=window.innerWidth,M=window.innerHeight;v.alignRight=!1,v.alignCenter=!1,v.showAbove=!1;const Z=d.left+i,_=d.left,ee=p-d.right;Z>p-l&&(d.right-i>=l?v.alignRight=!0:_>=l&&ee>=l?v.alignCenter=!0:v.alignRight=!0);const te=320,H=M-d.bottom-l,oe=d.top-l;H<te&&oe>H&&(v.showAbove=!0)}function P(){o.disabled||(n.showingPicker=!n.showingPicker,n.showingPicker&&setTimeout(()=>D(),0))}function G(i){n.hour=i}function X(i){n.minute=i}function J(i){n.period=i}function Q(i,l,d){n.hour=i,n.minute=l,n.period=d;const p=B(i,l,o.format);n.selectedTime=p,a("update:model-value",p),setTimeout(()=>{n.showingPicker=!1},200)}function Y(){const i=new Date,l=i.getHours(),d=i.getMinutes();n.hour=l,n.minute=d,n.period=l>=12?"PM":"AM";const p=B(l,d,o.format);n.selectedTime=p,a("update:model-value",p),n.showingPicker=!1}function V(){g(),a("update:model-value",""),n.showingPicker=!1}return(i,l)=>{const d=e.resolveComponent("icon-button"),p=e.resolveComponent("box");return e.openBlock(),e.createElementBlock("div",{class:"b-time-picker",ref_key:"pickerRef",ref:f},[h.value?(e.openBlock(),e.createElementBlock("div",Be,[i.$slots.default||i.$slots.description?(e.openBlock(),e.createBlock(R._sfc_main,{key:0,required:t.required},{description:e.withCtx(()=>[e.renderSlot(i.$slots,"description")]),default:e.withCtx(()=>[e.renderSlot(i.$slots,"default")]),_:3},8,["required"])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["field",{"has-addons":t.withIcon||y.value}])},[t.withIcon?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["control",u.value])},[e.createVNode(d,{"is-small":t.isSmall,"is-medium":t.isMedium,"is-large":t.isLarge,onClick:l[0]||(l[0]=e.withModifiers(()=>{},["prevent"])),class:"is-shadowless",role:"presentation",icon:"clock"},null,8,["is-small","is-medium","is-large"])],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["control",c.value])},[e.createElementVNode("input",{type:"time",class:e.normalizeClass(["input",r.value]),placeholder:t.placeholder,disabled:t.disabled,value:E.value,onInput:K,onBlur:$},null,42,Ce)],2),y.value?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["control",u.value])},[e.createVNode(d,{"is-small":t.isSmall,"is-medium":t.isMedium,"is-large":t.isLarge,onClick:e.withModifiers(V,["prevent"]),class:"is-shadowless",icon:"times-circle",title:"Clear time"},null,8,["is-small","is-medium","is-large"])],2)):e.createCommentVNode("",!0)],2),e.createVNode(L._sfc_main,{error:t.error},null,8,["error"])])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[i.$slots.default||i.$slots.description?(e.openBlock(),e.createBlock(R._sfc_main,{key:0,required:t.required},{description:e.withCtx(()=>[e.renderSlot(i.$slots,"description")]),default:e.withCtx(()=>[e.renderSlot(i.$slots,"default")]),_:3},8,["required"])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["field",{"has-addons":t.withIcon||y.value}])},[t.withIcon?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["control",u.value])},[e.createVNode(d,{"is-small":t.isSmall,"is-medium":t.isMedium,"is-large":t.isLarge,onClick:e.withModifiers(P,["prevent"]),class:"is-shadowless",icon:"clock"},null,8,["is-small","is-medium","is-large"])],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["control",c.value])},[e.createElementVNode("input",{class:e.normalizeClass(["input time-picker-input",r.value]),placeholder:t.placeholder,disabled:t.disabled,value:n.selectedTime,role:"combobox","aria-expanded":n.showingPicker,"aria-haspopup":"dialog","aria-describedby":k+"-description",onClick:P,onInput:j,onBlur:$,onKeydown:U},null,42,Ee)],2),y.value?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["control",u.value])},[e.createVNode(d,{"is-small":t.isSmall,"is-medium":t.isMedium,"is-large":t.isLarge,onClick:e.withModifiers(V,["prevent"]),class:"is-shadowless",icon:"times-circle",title:"Clear time"},null,8,["is-small","is-medium","is-large"])],2)):e.createCommentVNode("",!0)],2),e.createVNode(L._sfc_main,{error:t.error},null,8,["error"]),e.createVNode(e.Transition,{name:"vuema-fade",mode:"in-out"},{default:e.withCtx(()=>[T.value?(e.openBlock(),e.createBlock(p,{key:0,ref_key:"pickerWindow",ref:s,class:"b-time-picker-window",style:e.normalizeStyle(S.value),role:"dialog","aria-label":"Select time",id:k+"-dialog",onClick:l[1]||(l[1]=e.withModifiers(()=>{},["stop"]))},{default:e.withCtx(()=>[e.createVNode(be,{hour:n.hour,minute:n.minute,period:n.period,format:t.format,"minute-step":t.minuteStep,"min-time":t.minTime,"max-time":t.maxTime,"is-time-disabled":t.isTimeDisabled,"onUpdate:hour":G,"onUpdate:minute":X,"onUpdate:period":J,onSelectTime:Q},null,8,["hour","minute","period","format","minute-step","min-time","max-time","is-time-disabled"]),e.createElementVNode("div",{class:"field is-grouped mt-3 px-3 pb-3"},[e.createElementVNode("div",{class:"control"},[e.createElementVNode("button",{class:"button is-small is-light",onClick:Y,type:"button"}," Now ")]),e.createElementVNode("div",{class:"control"},[e.createElementVNode("button",{class:"button is-small is-light",onClick:V,type:"button"}," Clear ")])])]),_:1},8,["style","id"])):e.createCommentVNode("",!0)]),_:1})],64)),e.createElementVNode("div",{id:k+"-description",class:"is-sr-only","aria-live":"polite"}," Use arrow keys to navigate, Enter to select, Escape to close ",8,Me)],512)}}});exports.default=Te;
